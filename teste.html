<!DOCTYPE html>
<html>
<head>
    <title>Teste Sistema</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { margin: 10px; padding: 10px 20px; }
        #resultado { margin-top: 20px; padding: 15px; border: 2px solid #ccc; }
    </style>
</head>
<body>
    <h1>ğŸ”§ TESTE DO SISTEMA DE TICKETS</h1>
    
    <button onclick="testarCarregamento()">1ï¸âƒ£ Testar Carregamento</button>
    <button onclick="testarLocalStorage()">2ï¸âƒ£ Testar LocalStorage</button>
    <button onclick="testarTicketSystem()">3ï¸âƒ£ Testar TicketSystem</button>
    <button onclick="limparTudo()">ğŸ§¹ Limpar Tudo</button>
    
    <div id="resultado"></div>
    
    <script>
        function testarCarregamento() {
            const resultado = document.getElementById('resultado');
            resultado.innerHTML = '<h3>ğŸ“Š Status do Sistema:</h3>';
            
            // Testar scripts.js
            resultado.innerHTML += `<p>ğŸ” scripts.js: ${typeof scripts !== 'undefined' ? 'âœ… Carregado' : 'âŒ NÃ£o encontrado'}</p>`;
            
            // Testar TicketSystem
            resultado.innerHTML += `<p>ğŸ« TicketSystem: ${typeof TicketSystem !== 'undefined' ? 'âœ… DisponÃ­vel' : 'âŒ Indefinido'}</p>`;
            
            // Testar localStorage
            resultado.innerHTML += `<p>ğŸ’¾ localStorage: ${typeof localStorage !== 'undefined' ? 'âœ… DisponÃ­vel' : 'âŒ NÃ£o disponÃ­vel'}</p>`;
            
            // Testar AudioContext
            resultado.innerHTML += `<p>ğŸ”Š AudioContext: ${typeof (window.AudioContext || window.webkitAudioContext) !== 'undefined' ? 'âœ… DisponÃ­vel' : 'âŒ NÃ£o disponÃ­vel'}</p>`;
        }
        
        function testarLocalStorage() {
            const resultado = document.getElementById('resultado');
            resultado.innerHTML = '<h3>ğŸ’¾ Teste LocalStorage:</h3>';
            
            try {
                // Salvar teste
                localStorage.setItem('teste_sistema', 'valor_teste_' + Date.now());
                
                // Ler teste
                const valor = localStorage.getItem('teste_sistema');
                resultado.innerHTML += `<p>Salvamento: âœ… Funcionou (${valor})</p>`;
                
                // Verificar dados do sistema
                const dados = localStorage.getItem('ticketSystem');
                if (dados) {
                    resultado.innerHTML += `<p>Sistema de tickets: âœ… Tem dados salvos</p>`;
                } else {
                    resultado.innerHTML += `<p>Sistema de tickets: ğŸ“­ Sem dados salvos</p>`;
                }
                
            } catch (e) {
                resultado.innerHTML += `<p>âŒ Erro: ${e.message}</p>`;
            }
        }
        
        function testarTicketSystem() {
            const resultado = document.getElementById('resultado');
            resultado.innerHTML = '<h3>ğŸ« Teste TicketSystem:</h3>';
            
            if (typeof TicketSystem !== 'undefined') {
                resultado.innerHTML += `<p>âœ… Classe TicketSystem encontrada</p>`;
                
                // Testar mÃ©todos
                resultado.innerHTML += `<p>â€¢ init(): ${typeof TicketSystem.init === 'function' ? 'âœ…' : 'âŒ'}</p>`;
                resultado.innerHTML += `<p>â€¢ emitirTicket(): ${typeof TicketSystem.emitirTicket === 'function' ? 'âœ…' : 'âŒ'}</p>`;
                resultado.innerHTML += `<p>â€¢ showAlert(): ${typeof TicketSystem.showAlert === 'function' ? 'âœ…' : 'âŒ'}</p>`;
                
                // Tentar inicializar
                try {
                    TicketSystem.init();
                    resultado.innerHTML += `<p>ğŸ”§ InicializaÃ§Ã£o: âœ… Bem-sucedida</p>`;
                } catch (e) {
                    resultado.innerHTML += `<p>âŒ Erro na inicializaÃ§Ã£o: ${e.message}</p>`;
                }
            } else {
                resultado.innerHTML += `<p>âŒ TicketSystem NÃƒO definido!</p>`;
                
                // Tentar carregar manualmente
                resultado.innerHTML += `<p>ğŸ“¥ Tentando carregar scripts.js manualmente...</p>`;
                
                const script = document.createElement('script');
                script.src = 'scripts.js';
                script.onload = function() {
                    resultado.innerHTML += `<p>âœ… scripts.js carregado manualmente!</p>`;
                    if (typeof TicketSystem !== 'undefined') {
                        resultado.innerHTML += `<p>âœ… TicketSystem agora estÃ¡ disponÃ­vel!</p>`;
                    }
                };
                script.onerror = function() {
                    resultado.innerHTML += `<p>âŒ NÃ£o foi possÃ­vel carregar scripts.js</p>`;
                };
                document.head.appendChild(script);
            }
        }
        
        function limparTudo() {
            localStorage.clear();
            document.getElementById('resultado').innerHTML = '<p>ğŸ§¹ Tudo limpo!</p>';
        }
    </script>
    
    <!-- Carregar scripts.js -->
    <script src="scripts.js"></script>
    
    <script>
        // Log inicial
        console.log('ğŸ” TESTE.HTML - Scripts carregando...');
        console.log('TicketSystem definido?', typeof TicketSystem !== 'undefined');
        
        // Inicializar quando carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“„ TESTE.HTML - DOM carregado');
            if (typeof TicketSystem !== 'undefined') {
                console.log('âœ… TicketSystem disponÃ­vel, inicializando...');
                TicketSystem.init();
            }
        });
    </script>
</body>
</html>